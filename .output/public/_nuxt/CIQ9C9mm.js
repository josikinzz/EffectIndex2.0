import{_ as L}from"./CTbYNERF.js";import{_ as V,r as F,o as e,c as s,a as r,F as h,i as v,h as k,t as w,k as u,D as q,I as D,s as M,u as P,q as j,x as z,K as G,b as p,y as n,d as b,w as g,z as H,B,ah as K}from"./DdQnp8wQ.js";import{_ as O}from"./CAk5sbtQ.js";import{C as J}from"./tq_S_3kA.js";import{L as Q}from"./CA6pz1OT.js";import{_ as U}from"./DCM5VtuO.js";import{T as W}from"./B8pwYnEC.js";import{A as X}from"./7qQijOpj.js";import{_ as N}from"./NVYaaFKl.js";import{R as Y}from"./BPvMTzrZ.js";import{u as Z}from"./DieWdjBu.js";const tt={components:{RelatedReportItem:Y},props:{reports:{type:Array,default:()=>[]},maxReports:{type:Number,default:5}},data(){return{expanded:!1}},computed:{sortedReports(){const A=this.reports.filter(f=>f.featured),m=this.reports.filter(f=>!f.featured);return[...A,...m]},limitedReports(){return this.expanded?this.sortedReports:this.sortedReports.slice(0,this.maxReports)}},methods:{toggleExpanded(){this.expanded=!this.expanded}}},et={class:"relatedReports"};function rt(A,m,f,_,C,y){const E=F("related-report-item");return e(),s("div",et,[m[1]||(m[1]=r("p",null,"This effect seems to be mentioned within the following trip reports:",-1)),(e(!0),s(h,null,v(y.limitedReports,c=>(e(),k(E,{key:c._id,report:c},null,8,["report"]))),128)),y.sortedReports.length>f.maxReports&&!C.expanded?(e(),s("button",{key:0,class:"expandButton whiteButton",onClick:m[0]||(m[0]=(...c)=>y.toggleExpanded&&y.toggleExpanded(...c))}," Show "+w(y.sortedReports.length-f.maxReports)+" more reports... ",1)):u("",!0)])}const ot=V(tt,[["render",rt]]),nt={class:"pageContent"},st={key:0,class:"effect__gallery"},it={key:1},lt={key:1},at={key:2},ut={key:3},dt={key:4},pt={key:5},mt={key:0},ft={key:1},yt={key:6},ct={key:7},_t={key:8},St={__name:"index",async setup(A){let m,f;const _=q(),C=D(),y={name:"",summary_raw:"",social_media_image:"",tags:[],citations:[],see_also:[],external_links:[],contributors:[],replications:[],audio_replications:[],gallery_order:[],description:{},analysis:{},style_variations:{},personal_commentary:{},related_reports:[]},{data:E,error:c}=([m,f]=M(async()=>Z(`effects:detail:${String(_.params.name||"")}`,async()=>{const{effect:i}=await C(`/api/effects/${_.params.name}`);if(!i)throw K({statusCode:404,statusMessage:"Effect not found"});return{effect:i}},{watch:[()=>_.params.name]})),m=await m,f(),m);if(c.value)throw c.value;const o=B(()=>E.value?.effect??y),I=B(()=>{const i=o.value.tags,t={cognitive:"user",visual:"eye",auditory:"volume-up",tactile:"hand-paper",disconnective:"chain",multisensory:"cogs",uncomfortable:"frown",physical:"heart-rate",gustatory:"utensils",olfactory:"utensils"};if(Array.isArray(i)){for(let a in t)if(i.indexOf(a)>-1)return t[a]+".svg"}return"user.svg"});P(()=>({title:o.value.name,meta:[{name:"description",hid:"description",content:o.value.summary_raw},{name:"og:title",hid:"og:title",content:`Effect Index - ${o.value.name}`},{name:"og:description",hid:"og:description",content:o.value.summary_raw},{name:"og:image",hid:"og:image",content:o.value.social_media_image},{name:"twitter:title",hid:"twitter:title",content:`Effect Index - ${o.value.name}`},{name:"twitter:description",hid:"twitter:description",content:o.value.summary_raw},{name:"twitter:image",hid:"twitter:image",content:o.value.social_media_image}]}));const d=i=>{const t=o.value;if(i in t){const a=t[i];if(Array.isArray(a)){if(a.length>0)return!0}else if(typeof a=="string"){if(a.length>0)return!0}else if(a&&typeof a=="object"&&a.raw&&a.raw.length>0)return!0}return!1},{$scrollTo:S}=j(),T=i=>{!i||typeof S!="function"||setTimeout(()=>S("#"+i),750)};return z(()=>{T(_.query.s)}),G(()=>_.query.s,i=>{T(i)}),(i,t)=>{const a=L,$=H,R=O;return e(),s("div",nt,[r("article",null,[p(n(N),{filename:n(I),class:"categoryIcon"},null,8,["filename"]),r("h1",null,[b(w(n(o).name)+" ",1),p($,null,{default:g(()=>[i.$auth.hasScope("edit-effects")||i.$auth.hasScope("admin-effects")?(e(),k(a,{key:0,to:"/admin/effects/"+n(o).url,append:""},{default:g(()=>[p(n(N),{filename:"edit.svg",style:{display:"inline-block","margin-left":"10px",height:"20px",width:"20px"},color:"#27635d"})]),_:1},8,["to"])):u("",!0)]),_:1})]),d("description")?(e(),k(R,{key:0,data:n(o),body:n(o).description},null,8,["data","body"])):u("",!0),p($,null,{default:g(()=>[d("replications")?(e(),s("div",st,[t[0]||(t[0]=r("hr",null,null,-1)),t[1]||(t[1]=r("h3",{id:"replication-gallery"}," Replication Gallery ",-1)),p(n(Q),{"image-set":n(o).replications,order:n(o).gallery_order,base:"/img/gallery/"},null,8,["image-set","order"])])):u("",!0),d("audio_replications")?(e(),s("div",it,[t[2]||(t[2]=r("hr",null,null,-1)),t[3]||(t[3]=r("h3",{id:"audio-replications",style:{"margin-bottom":"2em"}}," Audio Replications ",-1)),(e(!0),s(h,null,v(n(o).audio_replications,(l,x)=>(e(),k(n(X),{key:x,src:`/audio/${l.resource}`,title:l.title,artist:l.artist},null,8,["src","title","artist"]))),128))])):u("",!0)]),_:1}),d("analysis")?(e(),s("div",lt,[t[4]||(t[4]=r("hr",null,null,-1)),t[5]||(t[5]=r("h3",{id:"analysis"}," Analysis ",-1)),p(R,{body:n(o).analysis},null,8,["body"])])):u("",!0),d("style_variations")?(e(),s("div",at,[t[6]||(t[6]=r("hr",null,null,-1)),t[7]||(t[7]=r("h3",{id:"style-variations"}," Style Variations ",-1)),p(R,{body:n(o).style_variations},null,8,["body"])])):u("",!0),d("personal_commentary")?(e(),s("div",ut,[t[8]||(t[8]=r("hr",null,null,-1)),t[9]||(t[9]=r("h3",{id:"personal-commentary"}," Personal Commentary ",-1)),p(R,{body:n(o).personal_commentary},null,8,["body"])])):u("",!0),d("related_reports")?(e(),s("div",dt,[t[10]||(t[10]=r("hr",null,null,-1)),t[11]||(t[11]=r("h3",{id:"related-reports"}," Related Reports ",-1)),p(n(ot),{reports:n(o).related_reports},null,8,["reports"])])):u("",!0),d("external_links")?(e(),s("div",pt,[t[14]||(t[14]=r("hr",null,null,-1)),d("see_also")?(e(),s("div",mt,[t[12]||(t[12]=r("h3",{id:"see-also"}," See Also ",-1)),r("ul",null,[(e(!0),s(h,null,v(n(o).see_also,(l,x)=>(e(),s("li",{key:x},[p(a,{to:l.location},{default:g(()=>[b(w(l.title),1)]),_:2},1032,["to"])]))),128))])])):u("",!0),d("external_links")?(e(),s("div",ft,[t[13]||(t[13]=r("h3",{id:"external-links"}," External Links ",-1)),r("ul",null,[(e(!0),s(h,null,v(n(o).external_links,(l,x)=>(e(),s("li",{key:x},[p(n(U),{href:l.url},{default:g(()=>[b(w(l.title),1)]),_:2},1032,["href"])]))),128))])])):u("",!0)])):u("",!0),d("citations")?(e(),s("div",yt,[t[15]||(t[15]=r("hr",null,null,-1)),t[16]||(t[16]=r("h3",{id:"references"}," References ",-1)),p(n(J),{citations:n(o).citations},null,8,["citations"])])):u("",!0),d("tags")?(e(),s("div",ct,[t[17]||(t[17]=r("hr",null,null,-1)),t[18]||(t[18]=r("h3",null," Tags ",-1)),(e(!0),s(h,null,v(n(o).tags,l=>(e(),k(n(W),{key:l,value:l},null,8,["value"]))),128))])):u("",!0),d("contributors")?(e(),s("div",_t,[t[19]||(t[19]=r("hr",null,null,-1)),t[20]||(t[20]=r("h3",{id:"contributors"}," Contributors ",-1)),t[21]||(t[21]=r("p",null," The following people contributed to the content of this article: ",-1)),(e(!0),s(h,null,v(n(o).contributors,l=>(e(),s("span",{key:l,class:"contributor"},[p(a,{to:"/profiles/"+l},{default:g(()=>[b(w(l),1)]),_:2},1032,["to"])]))),128))])):u("",!0)])])}}};export{St as default};
