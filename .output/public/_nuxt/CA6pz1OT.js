import{_ as y}from"./NVYaaFKl.js";import{_ as v,o as a,c as l,a as u,t as b,d as w,r as x,j as S,f as d,v as B,b as m,w as T,l as k,n as p,k as o,T as C,F as M,i as O,J as I}from"./DdQnp8wQ.js";const W={props:{title:{type:String,default:""},artist:{type:String,default:""},artistWebpage:{type:String,default:""}},methods:{openWindow(s){this.artistWebpage&&(window.open(this.artistWebpage),s.stopPropagation())}}},D={class:"lightBox__imageDetails"},R={class:"lightBox__title"},A={class:"lightBox__artist"};function E(s,t,n,h,r,e){return a(),l("div",D,[u("h3",R,b(n.title),1),u("h4",A,[t[1]||(t[1]=w(" by ",-1)),u("a",{onClick:t[0]||(t[0]=(...c)=>e.openWindow&&e.openWindow(...c))},b(n.artist),1)])])}const L=v(W,[["render",E]]),N={components:{ImageDetails:L,Icon:y},props:{imageSet:{default:()=>[],type:Array},order:{default:()=>[],type:Array},base:{type:String,default:""},gfycats:{type:Boolean,default:!0}},data(){return{current_image:0,thumbnailOffset:0,modalActive:!1,thumbs:[]}},computed:{currentImage(){return this.thumbs.length>0?this.current_image<=this.thumbs.length-1?this.thumbs[this.current_image]:this.imageSet[this.thumbs.length-1]:this.imageSet.length>0?this.current_image<=this.imageSet.length-1?this.imageSet[this.current_image]:this.imageSet[this.imageSet.length-1]:{}}},watch:{imageSet:function(s,t){this.current_image=0,this.updateThumbs()}},mounted(){this.updateThumbs(),this.updateThumbnailOffset()},updated(){this.updateThumbnailOffset(),this.thumbs.length||this.$emit("listEnd"),console.log(this.thumbs)},methods:{updateThumbs(){if(this.order.length){let s=[];this.order.forEach(n=>{let h=this.imageSet.find(r=>r._id===n._id);h&&s.push(h)});let t=this.imageSet.filter(n=>!this.order.find(h=>h._id===n._id));this.gfycats?this.thumbs=s.concat(t):this.thumbs=s.concat(t).filter(n=>n.type!=="gfycat")}else this.gfycats?this.thumbs=this.imageSet:this.thumbs=this.imageSet.filter(s=>s.type!=="gfycat");console.log(this.thumbs)},updateThumbnailOffset(){setTimeout(()=>{if(this.$refs.thumbnailReel&&this.$refs.activeThumbnail){let s=this.$refs.thumbnailReel,t=this.$refs.activeThumbnail[this.current_image];this.thumbnailOffset=s.offsetWidth/2-t.offsetLeft-t.offsetWidth/2}},0)},selectImage(s){this.current_image=s,this.updateThumbnailOffset()},nextImage(){this.current_image+1>=this.thumbs.length&&this.$emit("listEnd"),this.current_image=(this.current_image+1)%this.thumbs.length,this.updateThumbnailOffset()},previousImage(){this.current_image===0?(this.current_image=this.thumbs.length-1,this.$emit("listStart")):this.current_image=this.current_image-1,this.updateThumbnailOffset()},openImage(s,t){t?window.open(s):window.open("/img/gallery/"+s)},toggleModal(){let s={type:this.currentImage.type,resource:this.currentImage.resource};this.$store.commit("modal/set_data",s),this.$store.commit("modal/toggle")}}},V={class:"lightBox"},j={key:0,class:"lightBox__canvas"},z=["src"],F={ref:"thumbnailReel",class:"lightBox__thumbnailReel"},J=["onMousedown"],P=["src"],q=["src"];function G(s,t,n,h,r,e){const c=x("image-details"),_=y,g=S("touch");return d((a(),l("div",V,[e.currentImage?(a(),l("div",j,[m(C,{name:"fade"},{default:T(()=>[e.currentImage.resource&&e.currentImage.type==="image"?d((a(),l("div",{key:e.currentImage.resource,style:p("background-image: url('"+e.currentImage.resource+"');"),class:"lightBox__image",onClick:t[0]||(t[0]=k(i=>e.toggleModal(),["prevent"]))},[m(c,{title:e.currentImage.title,artist:e.currentImage.artist,"artist-webpage":e.currentImage.artist_url},null,8,["title","artist","artist-webpage"])],4)),[[g,e.nextImage,"swipe",{left:!0}],[g,e.previousImage,"swipe",{right:!0}]]):e.currentImage.resource&&e.currentImage.type==="gfycat"&&!r.modalActive?(a(),l("div",{key:e.currentImage.resource,style:{position:"relative",height:"100%"}},[u("iframe",{src:"https://streamable.com/e/"+e.currentImage.resource+"?autoplay=1&loop=1&muted=1&nocontrols=1",frameborder:"0",scrolling:"no",width:"100%",height:"100%",style:{position:"absolute",top:"0",left:"0"},allow:"autoplay",allowfullscreen:""},null,8,z),d(u("div",{class:"lightBox__touchControls",onClick:t[1]||(t[1]=(...i)=>e.toggleModal&&e.toggleModal(...i))},null,512),[[g,e.nextImage,"swipe",{left:!0}],[g,e.previousImage,"swipe",{right:!0}]]),m(c,{title:e.currentImage.title,artist:e.currentImage.artist,"artist-webpage":e.currentImage.artist_url},null,8,["title","artist","artist-webpage"])])):o("",!0)]),_:1}),u("a",{class:"lightBox__control previousImage",onMousedown:t[2]||(t[2]=(...i)=>e.previousImage&&e.previousImage(...i))},[m(_,{filename:"chevron-double-left.svg",class:"lightBox__icon",color:"white"})],32),u("a",{class:"lightBox__control nextImage",onMousedown:t[3]||(t[3]=(...i)=>e.nextImage&&e.nextImage(...i))},[m(_,{filename:"chevron-double-right.svg",class:"lightBox__icon",color:"white"})],32)])):o("",!0),u("div",F,[r.thumbs?(a(),l("div",{key:0,ref:"thumbnailContainer",style:p("left: "+r.thumbnailOffset+"px;"),class:"lightBox__thumbnailContainer"},[(a(!0),l(M,null,O(r.thumbs,(i,f)=>(a(),l("span",{key:f,onMousedown:H=>e.selectImage(f)},[i.type==="image"?(a(),l("img",{key:0,ref_for:!0,ref:"activeThumbnail",src:i.resource.includes("https://")?i.resource:"https://cdn-cf-east.streamable.com/image/"+i.resource+".jpg",class:I([r.current_image===f?{active:!0}:{},"lightBox__thumbnailImage"])},null,10,P)):o("",!0),i.thumbnail?(a(),l("img",{key:1,ref_for:!0,ref:"activeThumbnail",src:i.thumbnail.includes("https://")?i.thumbnail:"https://cdn-cf-east.streamable.com/image/"+i.thumbnail+".jpg",class:I([r.current_image===f?{active:!0}:{},"lightBox__thumbnailImage"])},null,10,q)):o("",!0)],40,J))),128))],4)):o("",!0)],512)],512)),[[B,r.thumbs.length>0]])}const U=v(N,[["render",G]]);export{U as L};
