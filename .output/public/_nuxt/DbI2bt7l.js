import{_}from"./DagAsSPK.js";import{A as p,_ as v,Q as m,o as l,c as u,a as e,b as h,k as y,t as c}from"./PhNZAdwz.js";const g=p("/spinner.svg");let f;f=require("wavesurfer.js");const P={components:{Icon:_},props:{src:{type:String,default:""},title:{type:String,default:""},artist:{type:String,default:""},audioRoutes:{type:String,default:""}},data(){return{state:"UNREADY",id:null,length:0,position:0,wavesurfer:void 0}},computed:{audioInfo(){let a={src:this.src,title:this.title,artist:this.artist};return this.audioRoutes&&this.audioRoutes.split(",").forEach(s=>{let i=s.split(":"),o=i[0]?i[0].trim():void 0,r=i[1]?i[1].trim():this.src,n=i[2]?i[2].trim():this.title,d=i[3]?i[3].trim():this.artist;(this._.provides[m]||this.$route).path.includes(o)&&(a={src:r,title:n,artist:d})}),a}},watch:{src:function(a){this.load()}},beforeDestroy(){this.pause(),this.wavesurfer.unAll()},mounted(){this.wavesurfer=f.create({container:this.$refs.waveform,waveColor:"#555555",cursorColor:"#CCCCCC",progressColor:"#3d9991",height:"50",hideScrollbar:!0,closeAudioContext:!0,responsive:!0}),this.wavesurfer.on("ready",this.play),this.wavesurfer.on("audioprocess",this.audioProcess),this.wavesurfer.on("finish",this.finish)},methods:{load(){this.state="LOADING",this.wavesurfer.load(this.audioInfo.src)},play(){this.state="PLAYING",this.length=this.wavesurfer.getDuration(),this.wavesurfer.play()},pause(){this.state="PAUSED",this.wavesurfer.pause()},audioProcess(){this.position=this.wavesurfer.getCurrentTime()},finish(){this.state="STOPPED",this.wavesurfer.seekTo(0)},getTime(a){let t=Math.floor(a/60),s=Math.floor(a-t*60);return s=s.toString().length<2?"0"+s.toString():s,`${t}:${s}`}}},w={class:"audioPlayer"},A={class:"audioPlayer__playButton"},S={key:1},D={class:"audioPlayer__audioInfo"},C={class:"audioPlayer__titleBar"},I={class:"audioPlayer__title"},k={class:"audioPlayer__artist"},N={ref:"waveform",class:"audioPlayer__waveform"},E={class:"audioPlayer__positionDownload"},R=["href"];function T(a,t,s,i,o,r){const n=_;return l(),u("div",w,[e("div",A,[o.state==="UNREADY"?(l(),u("a",{key:0,onMousedown:t[0]||(t[0]=d=>r.load())},[h(n,{filename:"play.svg",class:"audioPlayer__icon"})],32)):o.state==="LOADING"?(l(),u("a",S,[...t[3]||(t[3]=[e("img",{class:"spinner",src:g},null,-1)])])):o.state==="STOPPED"||o.state==="PAUSED"?(l(),u("a",{key:2,onMousedown:t[1]||(t[1]=d=>r.play())},[h(n,{filename:"play.svg",class:"audioPlayer__icon"})],32)):o.state==="PLAYING"?(l(),u("a",{key:3,onMousedown:t[2]||(t[2]=d=>r.pause())},[h(n,{filename:"pause.svg",class:"audioPlayer__icon"})],32)):y("",!0)]),e("div",D,[e("div",C,[e("div",I,c(r.audioInfo.title),1),e("div",k,c(r.audioInfo.artist),1)])]),e("div",N,null,512),e("div",E,[e("div",null,c(r.getTime(o.position))+" / "+c(r.getTime(o.length)),1),e("a",{href:s.src,target:"_blank"}," Download ",8,R)])])}const B=v(P,[["render",T]]);export{B as A};
