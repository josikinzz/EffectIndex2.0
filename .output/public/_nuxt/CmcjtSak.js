import{_ as S}from"./BFkWPtpr.js";import{_ as x,o as n,c,a as s,b as u,d as h,t as l,n as T,F as E,i as B,w as $,k as f,f as F,v as D,r as M,h as p,B as O,q as P,s as V,u as q,x as t,y as z,z as j,ah as G}from"./PhNZAdwz.js";import{_ as m}from"./DagAsSPK.js";import{_ as A}from"./BujIgRvZ.js";import{u as W}from"./D9lMb8_o.js";const J={components:{Icon:m},props:{header:{type:String,default:""},text:{type:String,default:""},headerColour:{type:String,default:"#FFFFFF"},icon:{type:String,default:"user.svg"}}},K={class:"report__textBox"},Q=["innerHTML"];function U(a,o,r,y,g,i){const d=m;return n(),c("div",K,[s("h2",{style:T({backgroundColor:r.headerColour}),class:"report__textBoxHeader"},[u(d,{filename:r.icon,style:{height:"1em",width:"1.2em"}},null,8,["filename"]),h(" "+l(r.header),1)],4),s("div",{class:"report__textBoxText",innerHTML:a.$md.render(r.text)},null,8,Q)])}const I=x(J,[["render",U],["__scopeId","data-v-626c55a7"]]),X={components:{ExtLink:A,Icon:m},props:{subject:{type:Object,default:()=>({})},profile:{type:Object,default:void 0}},computed:{filteredSubjectProperties(){const a=["name","trip_date","age","setting","gender","height","weight","medications"];return Object.keys(this.subject).filter(o=>o!=="pdf_url"&&this.subject[o]!=="").sort((o,r)=>a.indexOf(o)-a.indexOf(r))}},methods:{propertyLabel(a){return{name:"Name",trip_date:"Trip Date",age:"Age",setting:"Setting",gender:"Gender",height:"Height",weight:"Weight",medications:"Medications"}[a]}}},Y={class:"report__infoBox"},Z={class:"report__infoBoxHeader"},ee={class:"report__infoBoxItemContainer"},te={class:"label"},se={class:"value"},oe={key:0,class:"tracker_pdf"};function ne(a,o,r,y,g,i){const d=m,e=A;return n(),c("section",Y,[s("h2",Z,[u(d,{filename:"user.svg",style:{height:"1em",width:"1.2em","padding-right":"10px"}}),o[0]||(o[0]=h(" Context ",-1))]),s("div",ee,[(n(!0),c(E,null,B(i.filteredSubjectProperties,_=>(n(),c("div",{key:_,class:"report__infoBoxItem"},[s("template",null,[s("div",te,l(i.propertyLabel(_))+": ",1),s("div",se,l(r.subject[_]),1)])]))),128)),r.subject.pdf_url?(n(),c("div",oe,[u(e,{href:r.subject.pdf_url},{default:$(()=>[...o[1]||(o[1]=[h(" Subjective Effect Tracker PDF ",-1)])]),_:1},8,["href"])])):f("",!0)])])}const re=x(X,[["render",ne],["__scopeId","data-v-69b11ef9"]]),ae={components:{Icon:m},props:{substances:{type:Array,default:()=>[]}}},ce={class:"report__infoBox"},ie={class:"report__infoBoxHeader"},le={class:"report__infoBoxTableContainer"},de={class:"report__infoBoxTable"},_e={class:"report__infoBoxTableName"},ue={class:"report__infoBoxTableDose"},fe={class:"report__infoBoxTableRoA"};function pe(a,o,r,y,g,i){const d=m;return n(),c("section",ce,[s("h2",ie,[u(d,{filename:"capsules.svg",class:"categoryIcon",style:{height:"1em",width:"1.4em","padding-right":"10px"}}),o[0]||(o[0]=h(" Substances ",-1))]),s("div",le,[F(s("table",de,[o[1]||(o[1]=s("thead",null,[s("tr",{class:"report__infoBoxTableHeader"},[s("td",null," Name "),h(),s("td",null," Dosage "),h(),s("td",null," Route of Administration ")])],-1)),s("tbody",null,[(n(!0),c(E,null,B(r.substances,(e,_)=>(n(),c("tr",{key:_},[s("td",_e,l(e.name),1),s("td",ue,l(e.dose),1),s("td",fe,l(e.roa),1)]))),128))])],512),[[D,r.substances.length]])])])}const he=x(ae,[["render",pe]]),me={props:{log:{type:Array,default:()=>[]},headerColour:{type:String,default:"#FFFFFF"},header:{type:String,default:"Log"}},methods:{trimmedMarkdown(a){if(!a)return"";let o=this.$md.render(a);return o&&(o=o.trim()),o}}},ge={class:"report__logBox"},ye={class:"report__logBoxContainer"},ve={class:"inner rotate"},xe={class:"content"},be={key:0,class:"logTime"},$e=["innerHTML"];function ke(a,o,r,y,g,i){return n(),c("section",ge,[s("h2",{style:T({backgroundColor:r.headerColour}),class:"report__logBoxHeader"},l(r.header),5),s("div",ye,[s("div",{style:T({backgroundColor:r.headerColour}),class:"outer"},[s("div",ve,l(r.header),1)],4),s("div",xe,[(n(!0),c(E,null,B(r.log,(d,e)=>(n(),c("div",{key:e,class:"logItem"},[d.time?(n(),c("div",be,l(d.time)+": ",1)):f("",!0),s("div",{class:"logDescription",innerHTML:i.trimmedMarkdown(d.description)},null,8,$e)]))),128))])])])}const C=x(me,[["render",ke],["__scopeId","data-v-486d456c"]]),Ee={props:{value:{type:String,default:""}},methods:{clickTag(a){this.$router.push("/search?q="+a)}}};function Be(a,o,r,y,g,i){return n(),c("div",{class:"tag",onClick:o[0]||(o[0]=d=>i.clickTag(r.value))},l(r.value),1)}const je=x(Ee,[["render",Be],["__scopeId","data-v-50ee07e4"]]),we={components:{Icon:m},props:{effects:{type:Array,default:()=>[]},name:{type:String,default:"Name"},icon:{type:String,default:"eye.svg"}}},Ce={class:"category"},Te={class:"titleContainer"},Ie={class:"effectList"};function Se(a,o,r,y,g,i){const d=m,e=S;return n(),c("div",Ce,[s("div",Te,[u(d,{filename:r.icon,style:{height:"35px",width:"35px"}},null,8,["filename"]),s("h2",null,l(r.name),1)]),s("ul",Ie,[(n(!0),c(E,null,B(r.effects,_=>(n(),c("li",{key:_._id},[u(e,{to:`/effects/${_.url}`,class:"effect"},{default:$(()=>[h(l(_.name),1)]),_:2},1032,["to"])]))),128))])])}const Fe=x(we,[["render",Se]]),De={components:{RelatedEffectsCategory:Fe,Icon:m},props:{effects:{type:Array,default:()=>[]}},computed:{sensoryEffects(){return this.effects.filter(a=>a.tags.includes("sensory"))},physicalEffects(){return this.effects.filter(a=>a.tags.includes("physical"))},cognitiveEffects(){return this.effects.filter(a=>a.tags.includes("cognitive"))}}},Ae={class:"reportRelatedEffects"},Le={class:"header"},Re={class:"categories"};function He(a,o,r,y,g,i){const d=m,e=M("related-effects-category");return n(),c("div",Ae,[s("div",Le,[u(d,{filename:"sitemap.svg",style:{height:"1em",width:"1.2em","margin-right":"10px"}}),o[0]||(o[0]=s("h1",{class:"title"}," Related Effects ",-1))]),s("div",Re,[o[1]||(o[1]=s("p",{class:"description"}," This trip report seems to include the following subjective effects: ",-1)),i.sensoryEffects.length>0?(n(),p(e,{key:0,effects:i.sensoryEffects,name:"Sensory",icon:"eye.svg"},null,8,["effects"])):f("",!0),i.cognitiveEffects.length>0?(n(),p(e,{key:1,effects:i.cognitiveEffects,background:"#EEE",name:"Cognitive",icon:"user.svg"},null,8,["effects"])):f("",!0),i.physicalEffects.length>0?(n(),p(e,{key:2,effects:i.physicalEffects,name:"Physical",icon:"heart-rate.svg"},null,8,["effects"])):f("",!0)])])}const Ne=x(De,[["render",He]]),Me={class:"report"},Oe={class:"report__headerContainer"},Pe={class:"report__headerTitleContainer"},Ve={style:{display:"flex","flex-direction":"row","align-items":"center"}},qe={class:"report__title",style:{"margin-bottom":"0"}},ze={key:0},Ge={class:"report__titleAuthor"},We={key:0},Je={key:1},Ke={key:1},Qe={key:2},Ue={class:"report__tagsContainer"},Xe={class:"report__topSection"},Ye={class:"report__logsContainer"},nt={__name:"index",async setup(a){let o,r;const y=O(),{$store:g}=P(),i={_id:"",title:"",tags:[],subject:{name:"",trip_date:""},person:null,substances:[],introduction:"",conclusion:"",onset:[],peak:[],offset:[],related_effects:[]},{data:d}=([o,r]=V(async()=>W("reports:detail",async()=>{const b=await g.dispatch("reports/getReportBySlug",y.params.slug);if(!b)throw G({statusCode:404,statusMessage:"That report does not exist."});return await g.dispatch("profiles/get"),{report:b}},{watch:[()=>y.params.slug]})),o=await o,r(),o),e=j(()=>d.value?.report||i),_=j(()=>g.state.profiles.list.find(v=>v.username===e.value.subject.name)),w=j(()=>`A ${e.value.substances.map(k=>k.name).join(", ")} report from ${e.value.subject.name} on Effect Index.`),L=j(()=>e.value.related_effects&&e.value.related_effects.length>0);return q(()=>({title:e.value.title,meta:[{name:"description",hid:"description",content:w.value},{name:"og:title",hid:"og:title",content:`Effect Index - Trip Report - ${e.value.title} by ${e.value.subject.name}`},{name:"og:description",hid:"og:description",content:w.value},{name:"twitter:title",hid:"twitter:title",content:`Effect Index - Trip Report - ${e.value.title} by ${e.value.subject.name}`},{name:"twitter:description",hid:"twitter:description",content:w.value}]})),(b,v)=>{const k=S,R=z;return n(),c("article",Me,[s("div",Oe,[s("div",Pe,[s("div",Ve,[s("h1",qe,l(t(e).title),1),u(R,null,{default:$(()=>[b.$auth.loggedIn?(n(),c("div",ze,[u(k,{to:`/admin/reports/${t(e)._id}`},{default:$(()=>[u(t(m),{style:{height:"20px",width:"20px",opacity:"0.6","margin-left":"15px"},filename:"edit.svg"})]),_:1},8,["to"])])):f("",!0)]),_:1})]),F(s("div",Ge,[t(e).person?(n(),c("span",We,[v[0]||(v[0]=h(" by ",-1)),t(e).person.profile_url?(n(),p(k,{key:0,to:`/people/${t(e).person.profile_url}`},{default:$(()=>[h(l(t(e).person.full_name||t(e).person.alias),1)]),_:1},8,["to"])):(n(),c("span",Je,l(t(e).person.full_name||t(e).person.alias),1))])):t(_)?(n(),c("span",Ke,[v[1]||(v[1]=h(" by ",-1)),u(k,{to:"/profiles/"+t(_).username},{default:$(()=>[h(l(t(e).subject.name),1)]),_:1},8,["to"])])):(n(),c("span",Qe," by "+l(t(e).subject.name),1))],512),[[D,t(e).subject.name]])]),s("div",Ue,[(n(!0),c(E,null,B(t(e).tags,(H,N)=>(n(),p(t(je),{key:N,value:H},null,8,["value"]))),128))])]),s("div",Xe,[u(t(re),{profile:t(_),subject:t(e).subject},null,8,["profile","subject"]),u(t(he),{substances:t(e).substances},null,8,["substances"])]),t(e).introduction?(n(),p(t(I),{key:0,text:t(e).introduction,icon:"sun.svg","header-colour":"#EEE",header:"Introduction"},null,8,["text"])):f("",!0),s("div",Ye,[t(e).onset.length?(n(),p(t(C),{key:0,log:t(e).onset,"header-colour":"#DDFFDD",header:"Onset"},null,8,["log"])):f("",!0),t(e).peak.length?(n(),p(t(C),{key:1,log:t(e).peak,"header-colour":"#FFDDDD",header:"Peak"},null,8,["log"])):f("",!0),t(e).offset.length?(n(),p(t(C),{key:2,log:t(e).offset,"header-colour":"#DDDDFF",header:"Offset"},null,8,["log"])):f("",!0)]),t(e).conclusion?(n(),p(t(I),{key:1,text:t(e).conclusion,icon:"moon.svg","header-colour":"#EEE",header:"Conclusion / Aftermath"},null,8,["text"])):f("",!0),t(L)?(n(),p(t(Ne),{key:2,effects:t(e).related_effects},null,8,["effects"])):f("",!0)])}}};export{nt as default};
