import{_ as D}from"./CTbYNERF.js";import{R as x}from"./BPvMTzrZ.js";import{_ as F,o as s,c as a,a as u,L as w,J as A,u as M,q as O,s as P,b as B,y as i,d as k,w as L,F as f,i as _,t as S,h as v,k as V,M as z,B as d}from"./DdQnp8wQ.js";import{_ as H}from"./NVYaaFKl.js";import{l as J}from"./CBR4rsWR.js";import{u as G}from"./DieWdjBu.js";const Q={props:{selected:{type:String,default:""}},methods:{by(C){this.$emit("selectView",C)}}};function U(C,o,m,h,b,n){return s(),a("div",null,[u("a",{class:A({selected:m.selected==="substance"}),tabindex:"0",onKeypress:o[0]||(o[0]=w(l=>n.by("substance"),["enter"])),onClick:o[1]||(o[1]=l=>n.by("substance"))}," substance ",34),u("a",{class:A({selected:m.selected==="title"}),tabindex:"0",onKeypress:o[2]||(o[2]=w(l=>n.by("title"),["enter"])),onClick:o[3]||(o[3]=l=>n.by("title"))}," title ",34),u("a",{class:A({selected:m.selected==="author"}),tabindex:"0",onKeypress:o[4]||(o[4]=w(l=>n.by("author"),["enter"])),onClick:o[5]||(o[5]=l=>n.by("author"))}," author ",34)])}const W=F(Q,[["render",U],["__scopeId","data-v-6730decd"]]),X={class:"pageContent tripReports"},Y={key:0},Z={class:"report__reportItemContainer"},ee={key:0,class:"report__substanceList"},te={class:"report__reportItemContainer"},se={key:1},ne={key:2},re={key:1},oe={class:"report__reportItemContainer"},me={__name:"index",async setup(C){let o,m;const{sortBy:h}=J;M({title:"Trip Reports"});const{$store:b}=O();[o,m]=P(async()=>G("reports:list",async()=>(await Promise.all([b.dispatch("reports/get"),b.dispatch("profiles/get")]),{}))),await o,m();const n=z({name:"substance",direction:!0}),l=d(()=>b.state.reports.list.filter(e=>!e.unpublished)),j=d(()=>b.state.profiles.list.map(e=>e.username)),E=d(()=>{const e=new Set;return l.value.forEach(t=>{t.substances.length>1?e.add("Combinations"):t.substances.forEach(p=>e.add(p.name))}),Array.from(e)}),N=d(()=>{const e=new Set;return l.value.forEach(t=>{e.add(t.subject.name)}),Array.from(e)}),I=d(()=>{const e=h(E.value);return n.direction?e:e.reverse()}),T=d(()=>{const e=h(N.value);return n.direction?e:e.reverse()}),$=d(()=>{const e=h(l.value,["title"]);return n.direction?e:e.reverse()}),y=e=>j.value[j.value.indexOf(e)],R=e=>e==="Combinations"?l.value.filter(t=>Array.isArray(t.substances)&&t.substances.length>1):l.value.filter(t=>Array.isArray(t.substances)&&t.substances.find(p=>p.name===e)),K=e=>l.value.filter(t=>t.subject.name===e),q=e=>{n.name===e?n.direction=!n.direction:n.name=e};return(e,t)=>{const p=D;return s(),a("div",X,[B(i(H),{filename:"file-signature.svg",class:"categoryIcon"}),t[5]||(t[5]=u("h1",null," Trip Reports ",-1)),u("p",null,[t[1]||(t[1]=k(" The ",-1)),t[2]||(t[2]=u("strong",null,"trip reports section",-1)),t[3]||(t[3]=k(" of Effect Index exists to showcase our collection of high quality, consistently formatted trip reports that describe the subjective experiences our community members undergo while under the influence of various hallucinogenic substances. These reports are then used as anecdotal accounts that further support the existence of the various documented states within our ",-1)),B(p,{to:"/effects"},{default:L(()=>[...t[0]||(t[0]=[k(" Subjective Effect Index. ",-1)])]),_:1})]),B(i(W),{selected:i(n).name,onSelectView:q},null,8,["selected"]),i(n).name==="substance"?(s(),a("div",Y,[(s(!0),a(f,null,_(i(I).filter(r=>r!=="Combinations"),(r,g)=>(s(),a("div",{key:g,class:"report__substanceList"},[u("h3",null,S(r),1),u("div",Z,[(s(!0),a(f,null,_(R(r),c=>(s(),v(i(x),{key:c._id,report:c,"profile-name":y(c.subject.name)},null,8,["report","profile-name"]))),128))])]))),128)),i(I).indexOf("Combinations")>0?(s(),a("div",ee,[t[4]||(t[4]=u("h3",null," Combinations ",-1)),u("div",te,[(s(!0),a(f,null,_(R("Combinations"),r=>(s(),v(i(x),{key:r._id,report:r,"profile-name":y(r.subject.name)},null,8,["report","profile-name"]))),128))])])):V("",!0)])):i(n).name==="title"?(s(),a("div",se,[(s(!0),a(f,null,_(i($),r=>(s(),v(i(x),{key:r._id,report:r,"profile-name":y(r.subject.name)},null,8,["report","profile-name"]))),128))])):i(n).name==="author"?(s(),a("div",ne,[(s(!0),a(f,null,_(i(T),(r,g)=>(s(),a("div",{key:g,class:"report__substanceList"},[u("h3",null,[y(r)?(s(),v(p,{key:0,to:"/profiles/"+r},{default:L(()=>[k(S(r),1)]),_:2},1032,["to"])):(s(),a("span",re,S(r),1))]),u("div",oe,[(s(!0),a(f,null,_(K(r),c=>(s(),v(i(x),{key:c._id,report:c,"profile-name":y(c.subject.name)},null,8,["report","profile-name"]))),128))])]))),128))])):V("",!0)])}}};export{me as default};
