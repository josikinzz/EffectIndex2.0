import{_ as v,e as R,m as V,o as r,c as f,a as s,b as i,f as w,v as D,r as $,d as u,w as c,t as d,T as O,g as M,h as I,F as k,i as S,j as U,n as Y,k as C,l as N,p as H,q as z,s as q,x as W,y as b,z as G,A as J,B as K}from"./DdQnp8wQ.js";import{_ as A}from"./CTbYNERF.js";import{_ as E}from"./NVYaaFKl.js";import{l as T}from"./CBR4rsWR.js";import{f as Q}from"./bfKoIkxj.js";import{_ as B}from"./DCM5VtuO.js";import{F as X}from"./GxByCVut.js";import{u as Z}from"./DieWdjBu.js";import"./BA7KzPi5.js";import"./B_aXJe0o.js";const{debounce:ee}=T,te={components:{Icon:E},computed:{...V(R,{searchInput:"input",searchResults:"results"})},watch:{searchResults:{deep:!0,handler(t){(t?.total_results??0)>0&&this.$router.push("/search")}}},methods:{changeSearchInput(t){R().change_input(t.target.value),this.performSearch()},performSearch:ee(function(){R().search(this.searchInput)},400,{trailing:!0}),clear(){R().clear_input(),this.$refs.searchInput.focus()}}},se={class:"searchBox"},ne={class:"inputContainer"},oe={class:"spyglass"},re=["value"];function ae(t,e,o,l,g,n){const p=E;return r(),f("div",se,[s("div",ne,[s("div",oe,[i(p,{filename:"search.svg"})]),s("input",{ref:"searchInput",value:t.searchInput,type:"text",placeholder:"Search",class:"searchInput",onInput:e[0]||(e[0]=(...h)=>n.changeSearchInput&&n.changeSearchInput(...h))},null,40,re),w(s("div",{class:"clearButton",onClick:e[1]||(e[1]=(...h)=>n.clear&&n.clear(...h))},[i(p,{filename:"times-circle.svg"})],512),[[D,t.searchInput]])])])}const ie=v(te,[["render",ae],["__scopeId","data-v-5fb90819"]]),ce={components:{SearchBox:ie},data(){return{hiddenIntro:!1}},computed:{effectCount(){return this.$store.state.effects.list.length}},methods:{toggleIntro(){this.hiddenIntro=!this.hiddenIntro}}},le={class:"description"},de={class:"hiddenIntro"};function ue(t,e,o,l,g,n){const p=$("search-box"),h=A;return r(),f("div",le,[i(p),s("p",null,[e[2]||(e[2]=s("span",{class:"bold"}," Effect Index, ",-1)),e[3]||(e[3]=u(" which is currently under construction, is a resource dedicated to establishing the field of formalised subjective effect documentation. It is the home of the ",-1)),i(h,{to:"/effects/"},{default:c(()=>[...e[1]||(e[1]=[u(" Subjective Effect Index ",-1)])]),_:1}),u(" (SEI), which contains "+d(n.effectCount)+" effect descriptions that exist to serve as a comprehensive map of all potential experiences that can occur under the influence of any class of psychoactive compound, particularly hallucinogens. ",1)]),i(O,{name:"fade"},{default:c(()=>[w(s("div",de,[s("p",null,[e[5]||(e[5]=u(" The effects identified here are accompanied by detailed descriptions of how it feels to experience them. These are written in an objective and ",-1)),i(h,{to:"/documentation-style-guide"},{default:c(()=>[...e[4]||(e[4]=[u(" consistent writing style ",-1)])]),_:1}),e[6]||(e[6]=u(" based upon phenomenological observation and avoids the use of metaphor or analogy. The descriptions also strive to use language that is as simple and understandable as possible. This has been done with the hope that they will serve as a universal terminology that allows people to describe and discuss that which was previously considered ineffable. ",-1))]),s("p",null,[e[8]||(e[8]=u(" These effects are organised into categories based on the sense affected and their behaviour. Many of these are further broken down into levels, subcomponents, and variations in style, which can occur across different substances. Detailed ",-1)),i(h,{to:"/replications"},{default:c(()=>[...e[7]||(e[7]=[u(" replications ",-1)])]),_:1}),e[9]||(e[9]=u(" are included whenever possible to supplement the text descriptions in the form of images, audio clips, and animations. ",-1))])],512),[[D,g.hiddenIntro]])]),_:1}),s("div",{style:{display:"inline-block"},class:"whiteButton",onClick:e[0]||(e[0]=(...m)=>n.toggleIntro&&n.toggleIntro(...m))}," read "+d(g.hiddenIntro?"less":"more"),1),i(h,{style:{display:"inline-block","margin-left":"1em"},class:"pageContent whiteButton",to:"/about"},{default:c(()=>[...e[10]||(e[10]=[u(" About Us ",-1)])]),_:1})])}const fe=v(ce,[["render",ue],["__scopeId","data-v-8d780645"]]),pe={components:{Icon:E},props:{title:{type:String,default:""},description:{type:String,default:""},icon:{type:String,default:void 0}}},he={class:"frontpagePanel"},me={class:"frontpagePanelHeader"},_e={class:"frontpagePanelTitleContainer"},ge={class:"frontpagePanelTitle"},ve={class:"frontpagePanelDescription"},be={class:"content"},ye={class:"stub"};function $e(t,e,o,l,g,n){const p=E;return r(),f("div",he,[s("div",me,[s("div",_e,[s("h1",ge,d(o.title),1),s("div",ve,d(o.description),1)]),w(i(p,{filename:o.icon,class:"frontpagePanelIcon"},null,8,["filename"]),[[D,o.icon]])]),s("div",be,[M(t.$slots,"content",{class:"content"},void 0,!0)]),w(s("div",ye,[M(t.$slots,"stub",{},void 0,!0)],512),[[D,t.$slots.stub]])])}const F=v(pe,[["render",$e],["__scopeId","data-v-b240fc90"]]),xe={components:{FrontpagePanel:F},computed:{featuredEffects(){return this.$store.state.effects.list.filter(t=>t.featured)},visualEffects(){return this.featuredEffects.filter(t=>t.tags.includes("visual"))},cognitiveEffects(){return this.featuredEffects.filter(t=>t.tags.includes("cognitive"))},miscellaneousEffects(){return this.featuredEffects.filter(t=>t.tags.includes("miscellaneous"))}}},Ie={class:"featuredEffectsListContainer"},ke={class:"featuredEffectsCategory"},Se=["href"],Ee={class:"featuredEffectsCategory"},Fe=["href"],we={class:"featuredEffectsCategory"},Ce=["href"];function Ae(t,e,o,l,g,n){const p=A,h=$("FrontpagePanel");return r(),I(h,{icon:"eye.svg",title:"Featured Effects",description:"A selection of subjective effects that best represent the SEI",class:"featuredEffects"},{content:c(()=>[s("div",Ie,[s("div",ke,[e[0]||(e[0]=s("h4",null," Visual Effects ",-1)),(r(!0),f(k,null,S(n.visualEffects,(m,a)=>(r(),f("a",{key:m._id,href:`/effects/${m.url}`},d(m.name)+d(a<n.visualEffects.length-1?" ⋅ ":""),9,Se))),128))]),s("div",Ee,[e[1]||(e[1]=s("h4",null," Cognitive Effects ",-1)),(r(!0),f(k,null,S(n.cognitiveEffects,(m,a)=>(r(),f("a",{key:m._id,href:`/effects/${m.url}`},d(m.name)+d(a<n.cognitiveEffects.length-1?" ⋅ ":""),9,Fe))),128))]),s("div",we,[e[2]||(e[2]=s("h4",null," Miscellaneous Effects ",-1)),(r(!0),f(k,null,S(n.miscellaneousEffects,(m,a)=>(r(),f("a",{key:m._id,href:`/effects/${m.url}`},d(m.name)+d(a<n.miscellaneousEffects.length-1?" ⋅ ":""),9,Ce))),128))])])]),stub:c(()=>[e[4]||(e[4]=u(" For more, see the ",-1)),i(p,{to:"/effects/"},{default:c(()=>[...e[3]||(e[3]=[u(" Subjective Effect Index. ",-1)])]),_:1})]),_:1})}const Pe=v(xe,[["render",Ae],["__scopeId","data-v-a391e08d"]]),Re={props:{title:{type:String,default:""},author:{type:String,default:""},slug:{type:String,default:""},substances:{type:Array,default:()=>[]}},computed:{substance(){if(this.substances.length){if(this.substances.length>1)return{name:"Combination",dose:"",roa:""};{const[t]=this.substances,{name:e,dose:o,roa:l}=t;return{name:e,dose:o,roa:l}}}else return{name:"",dose:"",roa:""}}}},De={class:"featuredReport"},Me={class:"reportInfo"},Te={class:"reportTitle"},Ne=["href"],je={class:"reportAuthor"},Be={class:"reportAuthor"},Le={class:"reportSubstance"},Ve={class:"reportSubstanceName"},Oe={class:"reportSubstanceDoseRoa"};function Ue(t,e,o,l,g,n){return r(),f("div",De,[s("div",Me,[s("div",Te,[s("a",{href:`/reports/${o.slug}`},d(o.title),9,Ne)]),s("div",je,[e[0]||(e[0]=u(" by ",-1)),s("span",Be,d(o.author),1)])]),s("div",Le,[s("div",Ve,d(n.substance.name),1),s("div",Oe,d(n.substance.dose)+" "+d(n.substance.roa),1)])])}const Ye=v(Re,[["render",Ue]]),{shuffle:He}=T,ze={components:{FeaturedReport:Ye,FrontpagePanel:F},props:{numberOfReports:{type:Number,default:3}},computed:{reports(){return this.$store.state.reports.list},featuredReports(){const t=He(this.reports.filter(o=>o.featured)),e=this.numberOfReports;return t.length>=e?t.slice(0,e):t}}},qe={class:"featuredReports"};function We(t,e,o,l,g,n){const p=$("featured-report"),h=A,m=$("FrontpagePanel");return r(),I(m,{icon:"file-signature.svg",title:"Featured Reports",description:"Recommended firsthand accounts of hallucinogenic experiences"},{content:c(()=>[s("div",qe,[(r(!0),f(k,null,S(n.featuredReports,a=>(r(),I(p,{key:a.id,title:a.title,author:a.subject.name,slug:a.slug,substances:a.substances},null,8,["title","author","slug","substances"]))),128))])]),stub:c(()=>[e[1]||(e[1]=u(" For more, see the ",-1)),i(h,{to:"/reports/"},{default:c(()=>[...e[0]||(e[0]=[u(" reports section. ",-1)])]),_:1})]),_:1})}const Ge=v(ze,[["render",We],["__scopeId","data-v-f653ade4"]]),{shuffle:Je}=T,Ke={components:{Icon:E,FrontpagePanel:F},data(){return{index:void 0}},computed:{featuredReplications(){const t=o=>(o.type==="image"||o.type==="gfycat")&&o.featured,e=this.$store.state.replications.list.filter(t);return Je(e)},replication(){return this.featuredReplications.length?this.index===void 0?this.featuredReplications[0]:this.featuredReplications[this.index]:{}},effects(){return this.$store.state.effects.list},replicatedEffects(){if(!this.replication)return[];let t=this.replication.associated_effects;return t?this.effects.filter(o=>t.includes(o._id)):[]},imageUrl(){if(this.replication.type==="image")return console.log(this.replication.resource),this.replication.resource},modalData(){return{type:"image",resource:this.replication.resource}},properIntroduction(){let t=this.replicatedEffects[0];const e="A replication of ",o="A replication of an ";return t&&["Autonomous entity","Internal hallucination","External hallucination"].includes(this.replicatedEffects[0].name)?o:e}},methods:{toggleModal(){this.$store.commit("modal/set_data",this.modalData),this.$store.commit("modal/toggle")},nextImage(){this.index===void 0&&(this.index=0);let t=this.featuredReplications.length-1;this.index<t?this.index=this.index+1:this.index=0},previousImage(){this.index===void 0&&(this.index=0);let t=this.featuredReplications.length-1;this.index>0?this.index=this.index-1:this.index=t}}},Qe={key:0,style:{position:"relative",height:"300px"}},Xe=["src"],Ze={key:0},et={key:1},tt={class:"replicationArtist"};function st(t,e,o,l,g,n){const p=E,h=A,m=$("FrontpagePanel"),a=U("touch");return r(),I(m,{icon:"images.svg",title:"Featured Replications",description:"Artistic representations of specific subjective effects"},{content:c(()=>[w((r(),f("div",{style:Y("background-image: url('"+n.imageUrl+"');"),class:"replicationImage",onClick:e[3]||(e[3]=(..._)=>n.toggleModal&&n.toggleModal(..._))},[n.replication&&n.replication.type==="gfycat"?(r(),f("div",Qe,[s("iframe",{src:`https://streamable.com/e/${n.replication.resource}?autoplay=1&loop=1&muted=1&nocontrols=1`,frameborder:"0",scrolling:"no",width:"100%",height:"100%",style:{position:"absolute",top:"-5px",left:"0"},allowfullscreen:""},null,8,Xe)])):C("",!0),s("div",{class:"replicationControls previous",onClick:e[0]||(e[0]=N((..._)=>n.previousImage&&n.previousImage(..._),["stop"]))},[i(p,{filename:"chevron-double-left.svg",color:"white"})]),s("div",{class:"replicationControls next",onClick:e[1]||(e[1]=N((..._)=>n.nextImage&&n.nextImage(..._),["stop"]))},[i(p,{filename:"chevron-double-right.svg",color:"white"})]),s("div",{class:"replicationImageDescription",onClick:e[2]||(e[2]=N(()=>{},["stop"]))},[u(d(n.properIntroduction)+" ",1),(r(!0),f(k,null,S(n.replicatedEffects,(_,x)=>(r(),f("span",{key:_._id,class:"replicationEffect"},[x>0&&x===n.replicatedEffects.length-1?(r(),f("span",Ze," and ")):x>0?(r(),f("span",et,",")):C("",!0),i(h,{to:"/effects/"+_.url},{default:c(()=>[u(d(_.name),1)]),_:2},1032,["to"])]))),128)),s("div",tt," by "+d(n.replication.artist),1)])],4)),[[a,n.nextImage,"swipe",{left:!0}],[a,n.previousImage,"swipe",{right:!0}]])]),stub:c(()=>[e[5]||(e[5]=u(" For more, see the ",-1)),i(h,{to:"/replications/"},{default:c(()=>[...e[4]||(e[4]=[u(" replications gallery. ",-1)])]),_:1})]),_:1})}const nt=v(Ke,[["render",st],["__scopeId","data-v-36fab505"]]),ot={props:{article:{type:Object,default:void 0}},computed:{publicationDate(){if(this.article){const t=this.article.publication_date;return t?Q.format(new Date(t),"dddd, MMMM DD YYYY"):void 0}else return},readTime(){if(this.article&&this.article.body&&this.article.body.length){const{length:t}=this.article.body;return Math.round(t/1200)}else return"Unknown"},authors(){const{authors:t}=this.article;let e="";return t&&t.forEach((o,l)=>{e+=o.full_name,l<t.length-2?e+=", ":l<t.length-1&&(e+=" and ")}),e}}},rt={class:"featuredArticle"},at={class:"articleTitle"},it=["href"],ct={class:"articleAuthors"},lt={class:"articleInfo"},dt={class:"publicationDate"},ut={class:"articleLength"},ft={class:"articleDescription"};function pt(t,e,o,l,g,n){return r(),f("div",rt,[s("div",at,[s("a",{href:`/articles/${o.article.slug}`},d(o.article.title),9,it)]),s("div",ct," by "+d(n.authors),1),s("div",lt,[s("div",dt,d(n.publicationDate),1),e[0]||(e[0]=s("div",{class:"separator"}," · ",-1)),s("div",ut,d(n.readTime)+" min read ",1)]),s("p",ft,d(o.article.short_description),1)])}const ht=v(ot,[["render",pt]]),{shuffle:mt}=T,_t={components:{FeaturedArticle:ht,FrontpagePanel:F},props:{numberOfArticles:{type:Number,default:1}},computed:{articles(){return this.$store.state.articles.list},featuredArticles(){const t=mt(this.articles.filter(o=>o.featured)),e=this.numberOfArticles;return t.length>=e?t.slice(0,e):t}}},gt={class:"featuredArticles"};function vt(t,e,o,l,g,n){const p=$("featured-article"),h=A,m=$("FrontpagePanel");return r(),I(m,{icon:"file-invoice.svg",title:"Featured Article",description:"Analyses that go beyond individual subjective effects"},{content:c(()=>[s("div",gt,[(r(!0),f(k,null,S(n.featuredArticles,a=>(r(),I(p,{key:a.id,article:a},null,8,["article"]))),128))])]),stub:c(()=>[e[1]||(e[1]=u(" For more, see the ",-1)),i(h,{to:"/articles/"},{default:c(()=>[...e[0]||(e[0]=[u(" articles section. ",-1)])]),_:1})]),_:1})}const bt=v(_t,[["render",vt],["__scopeId","data-v-a6c26ec4"]]),yt={name:"FeaturedSponsor",components:{FrontpagePanel:F,ExtLink:B},props:{sponsorName:{type:String,default:void 0},sponsorIconPath:{type:String,default:void 0},sponsorLink:{type:String,default:void 0}}},$t={class:"featuredSponsor"},xt={key:0},It=["src","alt"];function kt(t,e,o,l,g,n){const p=B,h=$("FrontpagePanel");return o.sponsorName?(r(),I(h,{key:0,icon:"heart.svg",title:`Thank you ${o.sponsorName}!`,class:"featuredSponsorPanel"},H({content:c(()=>[s("div",$t,[o.sponsorIconPath&&o.sponsorLink?(r(),f("div",xt,[i(p,{href:o.sponsorLink},{default:c(()=>[s("img",{src:o.sponsorIconPath,alt:`${o.sponsorName} logo`,class:"sponsorIcon"},null,8,It)]),_:1},8,["href"])])):C("",!0)])]),_:2},[o.sponsorLink?{name:"stub",fn:c(()=>[e[0]||(e[0]=u(" Thank you to our wonderful sponsor, ",-1)),i(p,{href:o.sponsorLink},{default:c(()=>[u(d(o.sponsorName),1)]),_:1},8,["href"])]),key:"0"}:void 0]),1032,["title"])):C("",!0)}const St=v(yt,[["render",kt],["__scopeId","data-v-d30b1f4d"]]),Et={components:{FrontpagePanel:F}};function Ft(t,e,o,l,g,n){const p=$("FrontpagePanel");return r(),I(p,{icon:"flask.svg",title:"Substance Summaries",description:"Hallucinogenic substance classes, broken down and described"},{content:c(()=>[...e[0]||(e[0]=[s("ul",{class:"summaryList"},[s("li",{class:"summaryItem"},[s("span",{style:{color:"#333"}}," Psychedelics: "),s("a",{href:"/summaries/psychedelics/visual"}," Visual, "),s("a",{href:"/summaries/psychedelics/cognitive"}," Cognitive, "),s("a",{href:"/summaries/psychedelics/miscellaneous"}," Miscellaneous ")]),s("li",{class:"summaryItem"},[s("a",{href:"/summaries/dissociatives"}," Dissociatives ")]),s("li",{class:"summaryItem"},[s("a",{href:"/summaries/deliriants"}," Deliriants ")])],-1)])]),stub:c(()=>[...e[1]||(e[1]=[u(" For more, see the ",-1),s("a",{href:"/articles/"}," articles section. ",-1)])]),_:1})}const wt=v(Et,[["render",Ft],["__scopeId","data-v-41962cc5"]]),Ct={},At={class:"column"};function Pt(t,e){return r(),f("div",At,[M(t.$slots,"default")])}const j=v(Ct,[["render",Pt]]),Rt={},Dt={class:"columns"};function Mt(t,e){return r(),f("div",Dt,[M(t.$slots,"default")])}const Tt=v(Rt,[["render",Mt]]),Nt={class:"pageContent"},jt={key:0,class:"dataWarning"},Bt={__name:"index",async setup(t){let e,o;const{$store:l}=z(),g=a=>{const _=a?.statusCode||a?.response?.status||a?.data?.statusCode,x=a?.data?.error?.name||a?.name||"Error",P=a?.data?.error?.message||a?.statusMessage||a?.message||"Unknown error";return`${_?`${_} `:""}${x}: ${P}`},n=async(a=!1)=>{const _=[{label:"effects",needsFetch:()=>!l.state.effects.list.length,promise:()=>l.dispatch("effects/get")},{label:"replications",needsFetch:()=>!l.state.replications.list.length,promise:()=>l.dispatch("replications/featured")},{label:"reports",needsFetch:()=>!l.state.reports.list.length,promise:()=>l.dispatch("reports/get")},{label:"articles",needsFetch:()=>!l.state.articles.list.length,promise:()=>l.dispatch("articles/get")}].filter(y=>!a||y.needsFetch());if(_.length===0)return{message:""};const P=(await Promise.allSettled(_.map(y=>y.promise()))).map((y,L)=>({result:y,label:_[L].label})).filter(y=>y.result.status==="rejected");return P.length===0?{message:""}:{message:`Some homepage content is unavailable. ${P.map(y=>`${y.label} (${g(y.result.reason)})`).join("; ")}. Check /api/health for database status when running locally.`}},{data:p}=([e,o]=q(()=>Z("home:prefetch",async()=>n(!1),{getCachedData:()=>null})),e=await e,o(),e),h=J("");W(async()=>{const{message:a}=await n(!0);h.value=a||""});const m=K(()=>h.value||p.value?.message||"");return(a,_)=>{const x=G;return r(),f("div",Nt,[i(b(fe)),b(m)?(r(),f("div",jt,d(b(m)),1)):C("",!0),i(b(X)),i(b(Tt),null,{default:c(()=>[i(b(j),null,{default:c(()=>[i(b(St),{"sponsor-name":"Emergence Benefactors","sponsor-link":"https://ebenefactors.org/","sponsor-icon-path":"/ebenefactors.png"}),i(b(wt)),i(b(Pe)),i(b(bt))]),_:1}),i(b(j),null,{default:c(()=>[i(x,null,{default:c(()=>[i(b(nt))]),_:1}),i(b(Ge),{"number-of-reports":8})]),_:1})]),_:1})])}}},Kt=v(Bt,[["__scopeId","data-v-0c3265ef"]]);export{Kt as default};
