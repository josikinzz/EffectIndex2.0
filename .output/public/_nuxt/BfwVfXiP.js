import{_ as $,r as B,o as n,c,a as t,b as k,w as S,d as w,t as u,F as p,i as f,h as v,u as j,D as H,q as M,s as F,x as O,E as U,y as e,f as C,v as I,k as x,B as m,A as z}from"./DdQnp8wQ.js";import{_ as D}from"./CTbYNERF.js";import{T as N}from"./B8pwYnEC.js";import{A as G}from"./BA7KzPi5.js";import{_ as A}from"./NVYaaFKl.js";import{l as J}from"./CBR4rsWR.js";import{u as K}from"./DieWdjBu.js";import"./B_aXJe0o.js";import"./bfKoIkxj.js";const P={components:{Tag:N},props:{effect:{type:Object,default:()=>({})}}},Q={class:"searchResult"},W=["innerHTML"];function X(h,g,a,R,d,s){const _=D,r=B("tag");return n(),c("div",Q,[t("h3",null,[k(_,{to:"/effects/"+a.effect.url},{default:S(()=>[w(u(a.effect.name),1)]),_:1},8,["to"])]),t("div",{innerHTML:h.$md.render(a.effect.summary_raw)},null,8,W),(n(!0),c(p,null,f(a.effect.tags,(o,l)=>(n(),v(r,{key:l,value:o},null,8,["value"]))),128))])}const Y=$(P,[["render",X]]),Z={components:{Tag:N},props:{report:{type:Object,default:()=>({})}},computed:{substance(){const h=this.report;return h.substances.length>1?{name:"Combination",dose:"",roa:""}:h.substances[0]}}},ee={class:"searchResult"},te={class:"topContainer"},se={class:"titleAuthor"},ne={class:"author"},ae={class:"substanceDose"},ce={class:"substance"},re={class:"dose"};function oe(h,g,a,R,d,s){const _=D,r=B("tag");return n(),c("div",ee,[t("div",te,[t("div",se,[t("h3",null,[k(_,{to:"/reports/"+a.report.slug},{default:S(()=>[w(u(a.report.title),1)]),_:1},8,["to"])]),t("span",ne," by "+u(a.report.subject.name),1)]),t("div",ae,[t("div",ce,u(s.substance.name),1),t("div",re,u(s.substance.dose)+" "+u(s.substance.roa),1)])]),(n(!0),c(p,null,f(a.report.tags,(o,l)=>(n(),v(r,{key:l,value:o},null,8,["value"]))),128))])}const le=$(Z,[["render",oe]]),ue={class:"pageContent"},ie={class:"inputContainer"},_e=["value"],he={class:"searchResults"},de={key:0,class:"effectResults"},me={key:1,class:"articleResults"},pe={key:2,class:"effectResults"},fe={__name:"search",async setup(h){let g,a;const{debounce:R}=J;j({title:"Search"});const d=H(),{$store:s}=M(),_=z(null);[g,a]=F(async()=>K("search:prefetch",async()=>(d.query.q?(await s.dispatch("search/search",d.query.q),s.commit("search/change_input",d.query.q)):s.commit("search/clear_input"),{}),{watch:[()=>d.query.q]})),await g,a();const r=m(()=>s.state.search.results.effects),o=m(()=>s.state.search.results.reports),l=m(()=>s.state.search.results.articles),b=m(()=>s.state.search.input),T=m(()=>r.value||o.value||l.value),E=R(()=>{s.dispatch("search/search",b.value)},400,{trailing:!0}),L=q=>{s.commit("search/change_input",q.target.value),E()},V=()=>{s.commit("search/clear_input"),_.value?.focus()};return O(()=>{_.value?.focus()}),U(()=>{s.commit("search/clear_input")}),(q,y)=>(n(),c("div",ue,[t("h1",null,[y[0]||(y[0]=w(" Search ",-1)),k(e(A),{filename:"search.svg",class:"categoryIcon"})]),t("div",ie,[t("input",{ref_key:"searchInputRef",ref:_,value:e(b),type:"text",class:"searchInput",onInput:L},null,40,_e),C(t("div",{class:"clearButton",onClick:V},[k(e(A),{filename:"times-circle.svg",style:{height:"1.25em",width:"1.25em"}})],512),[[I,e(b).length]])]),C(t("div",he,[y[1]||(y[1]=t("hr",null,null,-1)),e(r)?(n(),c("div",de,[t("h1",null," Effects - "+u(e(r).length+(e(r).length>1?" results":" result")),1),(n(!0),c(p,null,f(e(r),i=>(n(),v(e(Y),{key:i._id,effect:i},null,8,["effect"]))),128))])):x("",!0),e(l)?(n(),c("ul",me,[t("h1",null," Articles - "+u(e(l).length+(e(l).length>1?" results":" result")),1),(n(!0),c(p,null,f(e(l),i=>(n(),v(e(G),{key:i._id,article:i},null,8,["article"]))),128))])):x("",!0),e(o)?(n(),c("div",pe,[t("h1",null," Reports - "+u(e(o).length+(e(o).length>1?" results":" result")),1),(n(!0),c(p,null,f(e(o),i=>(n(),v(e(le),{key:i._id,report:i},null,8,["report"]))),128))])):x("",!0)],512),[[I,e(T)]])]))}},qe=$(fe,[["__scopeId","data-v-21830e0e"]]);export{qe as default};
