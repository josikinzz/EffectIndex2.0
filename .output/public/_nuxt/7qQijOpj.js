const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C_IvMfRF.js","./DdQnp8wQ.js","./entry.-cvR0kyN.css"])))=>i.map(i=>d[i]);
import{C as v,_ as p,an as m,Q as y,o as l,c as u,a as s,b as h,k as w,t as f}from"./DdQnp8wQ.js";import{_ as c}from"./NVYaaFKl.js";const g=v("/spinner.svg");let _;const P={components:{Icon:c},props:{src:{type:String,default:""},title:{type:String,default:""},artist:{type:String,default:""},audioRoutes:{type:String,default:""}},data(){return{state:"UNREADY",id:null,length:0,position:0,wavesurfer:void 0}},computed:{audioInfo(){let e={src:this.src,title:this.title,artist:this.artist};return this.audioRoutes&&this.audioRoutes.split(",").forEach(i=>{let r=i.split(":"),o=r[0]?r[0].trim():void 0,a=r[1]?r[1].trim():this.src,n=r[2]?r[2].trim():this.title,d=r[3]?r[3].trim():this.artist;(this._.provides[y]||this.$route).path.includes(o)&&(e={src:a,title:n,artist:d})}),e}},watch:{src:function(e){this.load()}},beforeDestroy(){this.wavesurfer&&(this.pause(),this.wavesurfer.unAll(),this.wavesurfer.destroy())},async mounted(){if(!_){const e=await m(()=>import("./C_IvMfRF.js").then(t=>t.w),__vite__mapDeps([0,1,2]),import.meta.url);_=e.default||e}this.wavesurfer=_.create({container:this.$refs.waveform,waveColor:"#555555",cursorColor:"#CCCCCC",progressColor:"#3d9991",height:"50",hideScrollbar:!0,closeAudioContext:!0,responsive:!0}),this.wavesurfer.on("ready",this.play),this.wavesurfer.on("audioprocess",this.audioProcess),this.wavesurfer.on("finish",this.finish)},methods:{load(){this.wavesurfer&&(this.state="LOADING",this.wavesurfer.load(this.audioInfo.src))},play(){this.wavesurfer&&(this.state="PLAYING",this.length=this.wavesurfer.getDuration(),this.wavesurfer.play())},pause(){this.wavesurfer&&(this.state="PAUSED",this.wavesurfer.pause())},audioProcess(){this.wavesurfer&&(this.position=this.wavesurfer.getCurrentTime())},finish(){this.wavesurfer&&(this.state="STOPPED",this.wavesurfer.seekTo(0))},getTime(e){let t=Math.floor(e/60),i=Math.floor(e-t*60);return i=i.toString().length<2?"0"+i.toString():i,`${t}:${i}`}}},A={class:"audioPlayer"},D={class:"audioPlayer__playButton"},S={key:1},C={class:"audioPlayer__audioInfo"},I={class:"audioPlayer__titleBar"},E={class:"audioPlayer__title"},k={class:"audioPlayer__artist"},N={ref:"waveform",class:"audioPlayer__waveform"},R={class:"audioPlayer__positionDownload"},T=["href"];function b(e,t,i,r,o,a){const n=c;return l(),u("div",A,[s("div",D,[o.state==="UNREADY"?(l(),u("a",{key:0,onMousedown:t[0]||(t[0]=d=>a.load())},[h(n,{filename:"play.svg",class:"audioPlayer__icon"})],32)):o.state==="LOADING"?(l(),u("a",S,[...t[3]||(t[3]=[s("img",{class:"spinner",src:g},null,-1)])])):o.state==="STOPPED"||o.state==="PAUSED"?(l(),u("a",{key:2,onMousedown:t[1]||(t[1]=d=>a.play())},[h(n,{filename:"play.svg",class:"audioPlayer__icon"})],32)):o.state==="PLAYING"?(l(),u("a",{key:3,onMousedown:t[2]||(t[2]=d=>a.pause())},[h(n,{filename:"pause.svg",class:"audioPlayer__icon"})],32)):w("",!0)]),s("div",C,[s("div",I,[s("div",E,f(a.audioInfo.title),1),s("div",k,f(a.audioInfo.artist),1)])]),s("div",N,null,512),s("div",R,[s("div",null,f(a.getTime(o.position))+" / "+f(a.getTime(o.length)),1),s("a",{href:i.src,target:"_blank"}," Download ",8,T)])])}const B=p(P,[["render",b]]);export{B as A};
