import{_ as k}from"./CTbYNERF.js";import{_,f as b,v as $,o as n,c as r,t as p,h as v,w as u,d,F as A,i as I,k as m,r as y,a as l,J as w,C as x,b as c,l as S,n as D,T as z,G as H,z as L,g as j}from"./DdQnp8wQ.js";import{_ as M}from"./NVYaaFKl.js";const U={props:{location:{type:String,default:""},external:{type:Boolean,default:!1},name:{type:String,default:""},subMenuItems:{type:Array,default:()=>[]},scope:{type:Array,default:null}},computed:{access(){if(Array.isArray(this.scope)){for(let t=0;t<this.scope.length;t++)if(this.$auth.hasScope(this.scope[t]))return!0;return!1}else return!0}},methods:{itemAccess(t){if(Array.isArray(t)){for(let e=0;e<t.length;e++)if(this.$auth.hasScope(t[e]))return!0;return!1}else return!0}}},V={class:"headerNav__menuItem"},F=["href"],R={key:2,class:"headerNav__dropdown"},G=["href"];function J(t,e,a,g,f,s){const i=k;return b((n(),r("div",V,[a.external?(n(),r("a",{key:0,href:a.location,target:"_blank"},p(a.name),9,F)):(n(),v(i,{key:1,to:a.location,class:"headerNav__menuItemLink"},{default:u(()=>[d(p(a.name),1)]),_:1},8,["to"])),a.subMenuItems?(n(),r("ul",R,[(n(!0),r(A,null,I(a.subMenuItems,(o,h)=>b((n(),r("li",{key:h},[o.external?(n(),r("a",{key:0,href:o.location,target:"_blank"},p(o.name),9,G)):(n(),v(i,{key:1,to:o.location},{default:u(()=>[d(p(o.name),1)]),_:2},1032,["to"]))])),[[$,s.itemAccess(o.scope)]])),128))])):m("",!0)],512)),[[$,s.access]])}const Y=_(U,[["render",J]]),O={components:{MenuItem:Y},data(){return{subMenuItems:{}}},computed:{navigation(){return this.$store.state.navigation}}},q={class:"headerNav__mainNavigation"};function K(t,e,a,g,f,s){const i=y("menu-item");return n(),r("div",q,[(n(!0),r(A,null,I(s.navigation,(o,h)=>(n(),v(i,{key:o.name,location:o.location,external:o.external,name:h,"sub-menu-items":o.children,scope:o.scope},null,8,["location","external","name","sub-menu-items","scope"]))),128))])}const Q=_(O,[["render",K]]),W={props:{active:{type:Boolean,default:!1}},methods:{toggleHamburger:function(){this.$store.dispatch("pullout_menu/toggle")}}};function X(t,e,a,g,f,s){return n(),r("div",{class:"hamburger",onMousedown:e[0]||(e[0]=i=>s.toggleHamburger())},[l("div",{class:w("closed "+(a.active?"inactive":"active"))},[...e[1]||(e[1]=[l("span",{class:"patty"},null,-1),l("span",{class:"patty"},null,-1),l("span",{class:"patty"},null,-1)])],2),l("div",{class:w("open "+(a.active?"active":"inactive"))},[...e[2]||(e[2]=[l("span",{class:"patty"},null,-1),l("span",{class:"patty"},null,-1)])],2)],32)}const Z=_(W,[["render",X],["__scopeId","data-v-ddf4d691"]]),ee=x("/logo2.svg"),te={components:{MainNavigation:Q,Hamburger:Z},computed:{navbarPullout(){return this.$store.state.pullout_menu.active}}},ne={class:"navbar"};function oe(t,e,a,g,f,s){const i=k,o=y("main-navigation"),h=y("hamburger");return n(),r("header",ne,[c(i,{to:"/"},{default:u(()=>[...e[0]||(e[0]=[l("img",{class:"navbar__logo",src:ee,alt:"An eye, the EffectIndex logo."},null,-1)])]),_:1}),c(o),c(h,{active:s.navbarPullout},null,8,["active"])])}const C=_(te,[["render",oe]]),ae={props:{name:{type:String,default:""},location:{type:String,default:""},external:{type:Boolean,default:!1},children:{type:Array,default:void 0}},data(){return{expanded:!1}},methods:{toggleExpanded(){this.expanded=!this.expanded},checkItemAccess(t){if(Array.isArray(t)){for(let e=0;e<t.length;e++)if(this.$auth.hasScope(t[e]))return!0;return!1}else return!0}}},se={class:"pulloutMenu__itemContainer"},re=["href"],ie={key:0},le={key:1},ce={key:3},ue=["href"];function de(t,e,a,g,f,s){const i=k;return n(),r("li",se,[!a.children&&a.external?(n(),r("a",{key:0,href:a.location,target:"_blank"},p(a.name),9,re)):a.children?(n(),r("a",{key:2,onClick:e[0]||(e[0]=o=>s.toggleExpanded())},[f.expanded?(n(),r("span",le," - ")):(n(),r("span",ie," + ")),d(" "+p(a.name),1)])):(n(),v(i,{key:1,to:a.location},{default:u(()=>[d(p(a.name),1)]),_:1},8,["to"])),f.expanded&&a.children?(n(),r("ol",ce,[(n(!0),r(A,null,I(a.children,o=>b((n(),r("li",{key:o.name},[o.external?(n(),r("a",{key:1,href:o.location,target:"_blank"},p(o.name),9,ue)):(n(),v(i,{key:0,to:o.location},{default:u(()=>[d(p(o.name),1)]),_:2},1032,["to"]))])),[[$,s.checkItemAccess(o.scope)]])),128))])):m("",!0)])}const me=_(ae,[["render",de]]),_e={components:{PulloutItem:me},computed:{navbarPullout(){return this.$store.state.pullout_menu.active},navigation(){return this.$store.state.navigation}},methods:{checkItemAccess(t){if(Array.isArray(t)){for(let e=0;e<t.length;e++)if(this.$auth.hasScope(t[e]))return!0;return!1}else return!0}}},fe={class:"navbarPullout__menu"};function he(t,e,a,g,f,s){const i=y("pullout-item");return n(),r("div",{class:w("navbarPullout "+(s.navbarPullout?"active":""))},[l("div",fe,[(n(!0),r(A,null,I(s.navigation,(o,h)=>b((n(),r("ul",{key:h},[b(c(i,{name:h,location:o.location,external:o.external,children:o.children},null,8,["name","location","external","children"]),[[$,s.checkItemAccess(o.scope)]])])),[[$,s.checkItemAccess(o.scope)]])),128))])],2)}const N=_(_e,[["render",he]]),pe={components:{Icon:M},props:{type:{type:String,default:void 0},src:{type:String,default:void 0},active:{type:Boolean,default:!1}},head(){return{htmlAttrs:{class:this.active?"modal-active":""}}},computed:{url(){return console.log(`${this.src}`),`${this.src}`}},methods:{toggleModal(){this.$emit("toggleModal")},popout(){window.open(this.src,"_blank")}}},ge={key:1,style:{position:"relative",height:"100%"},class:"modalImageContainer"},ve=["src"];function ye(t,e,a,g,f,s){const i=M;return n(),v(z,{name:"fade"},{default:u(()=>[b(l("div",{class:"modal",onClick:e[3]||(e[3]=(...o)=>s.toggleModal&&s.toggleModal(...o))},[a.type==="image"?(n(),r("div",{key:0,style:D("background-image: url('"+s.url+"');"),class:"modalImageContainer",onClick:e[1]||(e[1]=S((...o)=>s.toggleModal&&s.toggleModal(...o),["stop"]))},[l("a",{class:"fileButton",onClick:e[0]||(e[0]=S((...o)=>s.popout&&s.popout(...o),["stop"]))},[c(i,{filename:"external-link.svg",color:"white"})])],4)):a.type==="gfycat"&&a.active?(n(),r("div",ge,[l("iframe",{src:"https://streamable.com/e/"+a.src+"?autoplay=1&loop=1&muted=1&nocontrols=1",frameborder:"0",scrolling:"no",width:"100%",height:"100%",style:{position:"absolute",top:"0",left:"0"},allow:"autoplay",allowfullscreen:""},null,8,ve),l("div",{class:"cover",onClick:e[2]||(e[2]=S((...o)=>s.toggleModal&&s.toggleModal(...o),["stop"]))})])):m("",!0)],512),[[$,a.active]])]),_:1})}const E=_(pe,[["render",ye],["__scopeId","data-v-581afbba"]]),be=x("/sm-icon-youtube.svg"),$e=x("/sm-icon-discord.svg"),ke=x("/sm-icon-reddit.svg"),xe=x("/sm-icon-github.svg"),we={};function Ae(t,e){return n(),r("footer",null,[...e[0]||(e[0]=[H('<div class="footer__social"><a href="https://www.youtube.com/c/Josikinz"><img src="'+be+'" height="32" width="32" alt="YouTube"></a><a href="/discord"><img src="'+$e+'" height="32" width="32" alt="Facebook"></a><a href="https://reddit.com/r/replications"><img src="'+ke+'" height="32" width="32" alt="Reddit"></a><a href="https://github.com/josikinzz/EffectIndex2.0"><img src="'+xe+'" height="32" width="32" alt="GitHub"></a></div><div class="footer__secret"><p><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br><small><i><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"> Â© This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. </a></i></small><br></p></div>',2)])])}const Ie=_(we,[["render",Ae]]),Se={props:{user:{type:Object,default:void 0}},methods:{async logout(){try{await this.$auth.logout(),this.$toasted.show("You have been logged out.",{duration:2e3,type:"success"})}catch(t){console.log(t)}}}},Me={class:"user-info"},Ce={class:"username"},Ne={class:"logout"};function Ee(t,e,a,g,f,s){const i=k;return n(),r("div",Me,[l("div",Ce,[c(i,{to:"/admin/me"},{default:u(()=>[d(p(a.user.username),1)]),_:1})]),l("div",Ne,[l("a",{onClick:e[0]||(e[0]=(...o)=>s.logout&&s.logout(...o))}," (logout) ")])])}const Pe=_(Se,[["render",Ee],["__scopeId","data-v-8b17b1b4"]]),Be={},Te={class:"user-menu"},De={key:0},ze={key:1},He={key:2},Le={key:3},je={key:4},Ue={key:5},Ve={key:6};function Fe(t,e){const a=k;return n(),r("ul",Te,[t.$auth.hasScope("admin")?(n(),r("li",De,[c(a,{to:"/admin"},{default:u(()=>[...e[0]||(e[0]=[d(" Misc ",-1)])]),_:1})])):m("",!0),t.$auth.hasScope("admin")?(n(),r("li",ze,[c(a,{to:"/admin/users"},{default:u(()=>[...e[1]||(e[1]=[d(" Users ",-1)])]),_:1})])):m("",!0),t.$auth.hasScope("admin")?(n(),r("li",He,[c(a,{to:"/admin/people"},{default:u(()=>[...e[2]||(e[2]=[d(" People ",-1)])]),_:1})])):m("",!0),t.$auth.hasScope("all-replications")||t.$auth.hasScope("own-replications")?(n(),r("li",Le,[c(a,{to:"/admin/replications"},{default:u(()=>[...e[3]||(e[3]=[d(" Replications ",-1)])]),_:1})])):m("",!0),t.$auth.hasScope("all-reports")||t.$auth.hasScope("own-reports")?(n(),r("li",je,[c(a,{to:"/admin/reports"},{default:u(()=>[...e[4]||(e[4]=[d(" Reports ",-1)])]),_:1})])):m("",!0),t.$auth.hasScope("all-articles")||t.$auth.hasScope("own-articles")?(n(),r("li",Ue,[c(a,{to:"/admin/articles"},{default:u(()=>[...e[5]||(e[5]=[d(" Articles ",-1)])]),_:1})])):m("",!0),t.$auth.hasScope("admin-effects")||t.$auth.hasScope("edit-effects")?(n(),r("li",Ve,[c(a,{to:"/admin/effects"},{default:u(()=>[...e[6]||(e[6]=[d(" Effects ",-1)])]),_:1})])):m("",!0)])}const Re=_(Be,[["render",Fe],["__scopeId","data-v-e36fb5fb"]]),Ge={components:{UserInfo:Pe,UserMenu:Re}},Je={class:"user-bar"},Ye={class:"user-bar-content"};function Oe(t,e,a,g,f,s){const i=y("user-info"),o=y("user-menu");return n(),r("nav",Je,[l("div",Ye,[c(i,{user:t.$auth.user},null,8,["user"]),c(o,{user:t.$auth.user},null,8,["user"])])])}const qe=_(Ge,[["render",Oe],["__scopeId","data-v-b83666b7"]]),Ke={name:"EffectIndex",components:{HeaderNav:C,CustomFooter:Ie,PulloutMenu:N,Modal:E,UserBar:qe},head(){return{titleTemplate:"%s - Effect Index",title:"Home",meta:[{name:"description",hid:"description",content:"A resource dedicated to establishing the field of formalised subjective effect documentation."},{name:"apple-mobile-web-app-title",hid:"apple-mobile-web-app-title",content:"Effect Index"},{name:"og:title",hid:"og:title",content:"Effect Index"},{name:"og:description",hid:"og:description",content:"A resource dedicated to establishing the field of formalised subjective effect documentation."},{name:"og:type",hid:"og:type",content:"website"},{name:"og:url",hid:"og:url",content:"https://effectindex.com"},{name:"og:image",hid:"og:image",content:"https://effectindex.com/logo-letter.png"},{name:"twitter:card",hid:"twitter:card",content:"summary"},{name:"twitter:title",hid:"twitter:title",content:"Effect Index"},{name:"twitter:description",hid:"twitter:description",content:"A resource dedicated to establishing the field of formalised subjective effect documentation."},{name:"twitter:image",hid:"twitter:image",content:"https://effectindex.com/logo-letter.png"},{name:"twitter:image:alt",hid:"twitter:image:alt",content:"Effect Index Logo"}]}},computed:{navbarPullout(){return this.$store.state.pullout_menu.active},modalActive(){return this.$store.state.modal.active},modalData(){return{type:this.$store.state.modal.type,resource:this.$store.state.modal.resource}}},methods:{toggleModal(){this.$store.commit("modal/toggle")}}},Qe={class:"layoutContainer"},We={class:"page"};function Xe(t,e,a,g,f,s){const i=C,o=y("user-bar"),h=L,P=y("custom-footer"),B=N,T=E;return n(),r("div",Qe,[l("div",{class:w([{mainContainerPulledout:s.navbarPullout},"mainContainer"])},[c(i),c(h,null,{default:u(()=>[t.$auth.loggedIn?(n(),v(o,{key:0})):m("",!0)]),_:1}),l("main",We,[j(t.$slots,"default")]),c(P)],2),c(B),s.modalActive?(n(),v(T,{key:0,active:s.modalActive,type:s.modalData.type,src:(s.modalData.type==="image",s.modalData.resource),onToggleModal:s.toggleModal},null,8,["active","type","src","onToggleModal"])):m("",!0)])}const nt=_(Ke,[["render",Xe]]);export{nt as default};
