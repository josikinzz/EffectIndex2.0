import{_ as A,o,c as d,b as _,w as D,a as i,r as T,t as h,F as k,i as I,h as v,D as B,I as E,s as M,ah as S,u as F,y as n,k as b,z as Y,B as L}from"./DdQnp8wQ.js";import{_ as N}from"./CAk5sbtQ.js";import{_ as C}from"./NVYaaFKl.js";import{_ as U}from"./CTbYNERF.js";import{f as V}from"./bfKoIkxj.js";import{A as R,T as j}from"./B_aXJe0o.js";import{C as z}from"./tq_S_3kA.js";import{u as H}from"./DieWdjBu.js";import"./DCM5VtuO.js";import"./7qQijOpj.js";const O={components:{Icon:C},props:{itemId:{type:String,default:void 0},itemUrl:{type:String,default:void 0}}},q={class:"adminToolbar"};function G(l,s,c,g,m,p){const f=C,u=U;return o(),d("div",q,[_(u,{class:"item",to:`${c.itemUrl}/${c.itemId}`},{default:D(()=>[_(f,{filename:"edit.svg",style:{height:"1em",width:"1em"}}),s[0]||(s[0]=i("span",{class:"itemDescription"}," Edit Article ",-1))]),_:1},8,["to"])])}const J=A(O,[["render",G],["__scopeId","data-v-6d1a3e71"]]),K={components:{AuthorInfo:R},props:{article:{type:Object,default:void 0}},computed:{publicationDate(){if(this.article){const l=this.article.publication_date;return l?V.format(new Date(l),"dddd, MMMM DD YYYY"):void 0}else return},readTime(){if(this.article&&this.article.body&&this.article.body.length){const{length:l}=this.article.body;return Math.round(l/1200)}else return"Unknown"}}},P={class:"byline"},Q={class:"articleInfo"},W={class:"publicationDate"},X={class:"articleLength"},Z={class:"authors"};function tt(l,s,c,g,m,p){const f=T("author-info");return o(),d("div",P,[i("div",Q,[i("div",W,h(p.publicationDate),1),s[0]||(s[0]=i("div",{class:"separator"}," Â· ",-1)),i("div",X,h(p.readTime)+" min read ",1)]),i("div",Z,[(o(!0),d(k,null,I(c.article.authors,u=>(o(),v(f,{key:u._id,author:u},null,8,["author"]))),128))])])}const et=A(K,[["render",tt],["__scopeId","data-v-8aeb8033"]]),it={class:"pageContent"},nt={class:"article"},st={class:"title"},ot={class:"subtitle"},at={class:"body"},rt={key:0,class:"citations"},lt={key:1,class:"tags"},$t={__name:"index",async setup(l){let s,c;const g={title:void 0,subtitle:void 0,_id:void 0,citations:[],tags:[],authors:[],short_description:"",social_media_image:"",body:{parsed:[]}},m=B(),p=E(),{data:f,error:u}=([s,c]=M(()=>H(`article:${String(m.params.slug||"")}`,()=>p(`/api/articles/${m.params.slug}`),{watch:[()=>m.params.slug]})),s=await s,c(),s);if(u.value)throw S({statusCode:404,statusMessage:"That article could not be found."});const a=L(()=>f.value?.article??g),y=t=>{if(Array.isArray(t)&&t.length){let e="- ";return t.forEach((r,$)=>{e+=r.full_name,$<t.length-1&&(e+=", ")}),e}return""};F(()=>{const t=a.value;return t?{title:`${t.title} ${y(t.authors)}`,meta:[{name:"description",hid:"description",content:t.short_description},{name:"og:title",hid:"og:title",content:`${t.title} ${y(t.authors)} - EffectIndex`},{name:"og:description",hid:"og:description",content:t.short_description},{name:"og:image",hid:"og:image",content:t.social_media_image},{name:"twitter:title",hid:"twitter:title",content:`${t.title} ${y(t.authors)} - EffectIndex`},{name:"twitter:description",hid:"twitter:description",content:t.short_description},{name:"twitter:image",hid:"twitter:image",content:t.social_media_image}]}:{}});const w=t=>{const e=a.value;if(e&&t in e){const r=e[t];if(Array.isArray(r)&&r.length>0||typeof r=="string"&&r.length>0)return!0}return!1};return(t,e)=>{const r=Y,$=N;return o(),d("div",it,[i("article",nt,[_(r,null,{default:D(()=>[t.$auth.hasScope("editor")?(o(),v(n(J),{key:0,"item-id":n(a)._id,"item-url":"/admin/articles"},null,8,["item-id"])):b("",!0)]),_:1}),i("h1",st,h(n(a).title),1),i("h2",ot,h(n(a).subtitle),1),_(n(et),{article:n(a)},null,8,["article"]),e[4]||(e[4]=i("hr",{style:{margin:"2em 0"}},null,-1)),i("div",at,[_($,{body:n(a).body},null,8,["body"])]),w("citations")?(o(),d("div",rt,[e[0]||(e[0]=i("hr",null,null,-1)),e[1]||(e[1]=i("h3",null," References ",-1)),_(n(z),{citations:n(a).citations},null,8,["citations"])])):b("",!0),w("tags")?(o(),d("div",lt,[e[2]||(e[2]=i("hr",null,null,-1)),e[3]||(e[3]=i("h3",null," Tags ",-1)),(o(!0),d(k,null,I(n(a).tags,x=>(o(),v(n(j),{key:x,value:x},null,8,["value"]))),128))])):b("",!0)])])}}};export{$t as default};
